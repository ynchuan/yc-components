!function(t){t.fn.grpcollapse=function(a){if("object"==typeof a){var e=t.extend({isHidePre:!0},a),s=t(this),l=new i(s,e);l.createDomStrcs(),l.initCollapse(e),l.addClickListener(),this.clps=l}else"object"!=typeof a&&this.clps.initCollapse(a);return this};var i=function(t,i){this.dom=t,this.data=i.data,this.opts=i,this.count=1};i.prototype={createDomStrcs:function(){var t="<ul class='grp_collpase_ul'>";t+=this.dataiteration("root",this.data,1),t+="</ul>",this.dom.html(t)},dataiteration:function(t,i,a){for(var e="",s=0;s<i.length;s++){var l=i[s],o="",r="";1==a?r="icon-right":o="li-sub",e+="<li class='grp_collpase_li '><div class='grp_collpase_item "+o+"' data-toggle='show'  data-relate="+t+" data-uid="+l.uid+" data-leval="+a+" data-bind=''><i class='icon-left icon-"+l.uid+"'></i><span class='grp_collpase_txt'>"+l.title+"</span><i class='"+r+"' ></i></div></li>",l.sublist&&(e+=arguments.callee(l.uid,l.sublist,a+1))}return e},initCollapse:function(i){if("string"==typeof i){var a=this.dom.find(".grp_collpase_ul [data-uid='"+i+"']"),e=a.data("relate");return"root"!=e&&this.dom.find(".grp_collpase_ul [data-uid="+e+"]").trigger("click"),a.trigger("click"),void("root"==e&&this.count++)}if("number"==typeof i){var a=this.dom.find(".grp_collpase_ul [data-relate=root]").eq(i);return void a.trigger("click")}this.dom.find(".grp_collpase_item[data-relate=root]").each(function(){var i=t(this).data("uid");t(this).data("toggle","hide"),t("[data-relate="+i+"]").hide()})},addClickListener:function(){var i=this;this.dom.on("click",".grp_collpase_item",function(){var a=t(this).data("leval");1==a?i.rootClickDeal(t(this)):2==a&&i.subClickDeal(t(this))})},rootClickDeal:function(i){var a=i.data("toggle"),e=i.data("uid"),s=t("[data-relate="+e+"]");this.preuid&&t("[data-relate="+this.preuid+"]").hide(),this.preuid&&this.preuid!=e&&(this.preDom.data("toggle","hide"),t("[data-relate="+this.preuid+"]").hide(),this.preDom.parent().removeClass("active")),"show"==a?(i.data("toggle","hide"),s.hide()):(i.data("toggle","show").parent().addClass("active"),s.show()),this.preuid=e,this.preDom=i},subClickDeal:function(t){this.presubItem&&this.presubItem.removeClass("checked"),t.parent().addClass("checked"),this.presubItem=t.parent(),0!=this.count&&this.opts.clickEvent.call(t,event,t.data("uid")),this.count++}}}(jQuery);