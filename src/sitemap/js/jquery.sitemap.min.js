!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function i(t){this.data=t,this.DOMStr="",this.m=0,this.count=1}t.fn.siteMap=function(n){var a=this,s=t.extend({},n),c=s.data,e="",d=new i(c);e=d.getDOM(),a.html(e),d.initListener(t(".ic"))},i.prototype={getDOM:function(){return this.iteration(this.data,this.m),this.DOMStr},iteration:function(t,i){if(this.DOMStr+=this.forEachChild(t,i),t&&0!=t.childList.length)for(var n=0;n<t.childList.length;n++)this.iteration(t.childList[n],i+1)},forEachChild:function(t,i){this.m<i&&(this.m=i);for(var n="",a=0;i>a;a++)n+="<span class=rs></span>";var s="<div class=div_r"+i+" data-leval="+i+">";return s+=n+"<span class=ic data-id="+(i+1)+"></span><a class='rc "+t["class"]+"' href="+t.url+" target=_blank>"+i+":"+t.title+"&nbsp;"+this.count+"</a>",s+="</div>",this.count++,s},showIn:function(t){var i=t.data("leval");t.data("hide",!1),t.nextUntil("[data-leval="+i+"]").css({display:"block"}),t.find(".ic").css({"background-position":"-45px -125px"})},hideOut:function(t){var i=t.data("leval");t.data("hide",!0);var n=t.nextUntil("[data-leval="+i+"]"),a=~~n.attr("data-leval"),s=~~t.attr("data-leval");(s&&a&&a>s||0===s)&&n.css({display:"none"}),t.find(".ic").css({"background-position":"-15px -125px"})},toggleIO:function(t){t.data("hide")?this.showIn(t):this.hideOut(t)},bindClick:function(i){var n=this;i.bind("icon.click",function(){n.toggleIO(t(this).parent())})},initListener:function(i){this.bindClick(i),i.bind("click",function(){t(this).trigger("icon.click")})}}});