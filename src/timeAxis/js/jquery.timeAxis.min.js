!function(t){t.fn.timeAxis=function(i){var s=t.extend({},i),e=new a(s,this);e.init()};var a=function(t,a){this.data=t.data,this.$dom=a};a.prototype.sort=function(){for(var t=this.data,a=t.length,i=0;a-1>i;i++)for(var s=Date.parse(t[i].date),e=a-1;e>i;e--){var n=Date.parse(t[e].date);if(n>s){var l=t[e];t[e]=t[i],t[i]=l,s=Date.parse(t[i].date)}}},a.prototype.render=function(){for(var t,a,i=this.data,s='<div class="time-axis" >',e=0;e<i.length;e++){var n=i[e].date.split("-");(!t||t&&t!==n[0])&&(s+='<div class="tli tl-year"> <span class = "time" > '+n[0]+' 年 - </span> <span class = "icon" > </span> <div class="toast"><i class="triangle-left"></i>'+i[e].event+"</div></div>"),(!a||a&&a!==n[1]||t!=n[0]&&a==n[1])&&(s+='<div class="tli tl-month"> <span class = "time" > '+n[1]+' 月 <i class = "triangle-down" > </i></span > <span class = "icon" > </span> <div class="toast"><i class="triangle-left"></i>'+i[e].event+"</div></div > "),t=n[0],a=n[1],s+='<div class="tli tl-day"> <span class = "time" > '+n[1]+n[2]+' &#183;</span> <span class = "icon" > </span><div class="toast"><i class="triangle-left"></i>'+i[e].event+"</div> </div > "}return s+='<div class="time-line"></div></div>'},a.prototype.listerner=function(){this.$dom.on("click",".time-axis .tl-month .time",function(){var a=t(this).parent(".tli");a.nextUntil(a.nextAll(".tl-month,.tl-year").eq(0)).toggle("slow"),t(this).find(".triangle-down").toggleClass("rote180")})},a.prototype.init=function(){this.sort(),this.$dom.html(this.render()),this.listerner()}}(jQuery);var data=[{date:"2014-05-02",event:"今2014-05-02，你好今天！"},{date:"2015-09-03",event:"昨天2015-09-03，你好昨天！"},{date:"2015-03-04",event:"前天2015-03-04，你好前天！"},{date:"2013-02-05",event:"今天2013-02-05，你好今天！"}];